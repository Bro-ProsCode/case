---
import BaseLayout from '../layouts/BaseLayout.astro';
import SEO from '../components/SEO.astro';
import PageStats from '../components/PageStats.astro';

// DATA SECTION: Update your pieces here
const compositions = [
  {
    title: "Il Fine Ultimo",
    instruments: "Violin, Viola, Cello, Bass",
    audioFile: "/audio/Il-Fine-Ultimo.mp3", // Path to your uploaded file
    pdfLink: "/scores/Il-Fine-Ultimo-score.pdf",
    year: "2026",
    process: '"The Ultimate Purpose" in Italian, this piece exemplifies the beauty and tragedy of human life, including how unexpected turns can make the journey ever more masterfully nuanced. Il Fine Ultimo was composed entirely in MuseScore4.'
  },

];

const totalWorks = compositions.length;
---

<BaseLayout>
  <SEO 
    slot="head"
    title="Original Music | Brody Kester"
    description="Original compositions and musical scores."
    type="website"
  />

  <main class="page-container">
    <header class="page-header">
      <h1 class="page-title">Original Music</h1>
      <p class="page-intro">A collection of my original compositions and their downloadable scores and audios.</p>
      <PageStats text={`${totalWorks} ${totalWorks === 1 ? 'composition' : 'compositions'}`} />
    </header>

    <div class="card-list">
      {compositions.map((piece) => (
        <article class="music-card">
          <div class="music-card-content">
            <div class="music-header">
              <h2 class="music-title">{piece.title}</h2>
              <span class="music-year">{piece.year}</span>
            </div>
            
            <p class="instruments"><strong>Instruments:</strong> {piece.instruments}</p>
            
            <div class="process-section">
              <strong>The Process:</strong>
              <p>{piece.process}</p>
            </div>

            <div class="audio-container">
              <audio controls>
                <source src={piece.audioFile} type="audio/mpeg" />
                Your browser does not support the audio element.
              </audio>
            </div>
            
            <div class="music-footer">
              <a href={piece.pdfLink} class="pdf-button" target="_blank">
                View Score (PDF)
              </a>
            </div>
          </div>
        </article>
      ))}
    </div>
  </main>
</BaseLayout>

<style>
  .card-list {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin-top: 2rem;
  }

  .music-card {
    padding: 2rem;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    background: var(--color-bg-secondary);
  }

  .music-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 0.5rem;
  }

  .music-title {
    font-size: 1.75rem;
    font-weight: 700;
    margin: 0;
    color: var(--color-text);
  }

  .music-year {
    color: var(--color-text-muted);
    font-size: 0.9375rem;
  }

  .instruments {
    font-size: 1rem;
    color: var(--color-text-secondary);
    margin-bottom: 1.5rem;
  }

  .process-section {
    margin-bottom: 1.5rem;
    font-size: 1.0625rem;
    line-height: 1.7;
    color: var(--color-text-secondary);
  }

  .process-section strong {
    display: block;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
    margin-bottom: 0.5rem;
  }

  .audio-container {
    margin-bottom: 2rem;
  }

  audio {
    width: 100%;
    height: 40px;
    filter: invert(0.1); /* Subtle adjustment to match dark/light themes */
  }

  .pdf-button {
    display: inline-flex;
    padding: 0.625rem 1.25rem;
    background: var(--color-accent);
    color: white;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    font-size: 0.9375rem;
  }

  .pdf-button:hover {
    filter: brightness(1.1);
  }
</style>
