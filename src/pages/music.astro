---
import BaseLayout from '../layouts/BaseLayout.astro';
import SEO from '../components/SEO.astro';
import PageStats from '../components/PageStats.astro';

// You can eventually move this data to a 'content collection' 
// for now, we'll define your compositions here for simplicity.
const compositions = [
  {
    title: "Symphony No. 1 in C Minor",
    instruments: "Full Orchestra (Strings, Brass, Woodwinds, Percussion)",
    audioEmbed: '<iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/YOUR_TRACK_ID&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"></iframe>',
    pdfLink: "/scores/symphony-1.pdf",
    year: "2025"
  }
];

const totalWorks = compositions.length;
---

<BaseLayout>
  <SEO 
    slot="head"
    title="Original Music | Brody Kester"
    description="Original compositions and musical scores."
    type="website"
  />

  <main class="page-container">
    <header class="page-header">
      <h1 class="page-title">Original Music</h1>
      <p class="page-intro">
        A collection of my original compositions, scores, and arrangements.
      </p>
      <PageStats text={`${totalWorks} compositions`} />
    </header>

    <div class="card-list">
      {compositions.map((piece) => (
        <article class="music-card">
          <div class="music-card-content">
            <div class="music-header">
              <h2 class="music-title">{piece.title}</h2>
              <span class="music-year">{piece.year}</span>
            </div>
            
            <p class="instruments"><strong>Instruments:</strong> {piece.instruments}</p>
            
            <div class="audio-player" set:html={piece.audioEmbed} />
            
            <div class="music-footer">
              <a href={piece.pdfLink} class="pdf-button" target="_blank">
                View Score (PDF)
              </a>
            </div>
          </div>
        </article>
      ))}
    </div>
  </main>
</BaseLayout>

<style>
  /* These styles mimic your ProjectCard component for a seamless look */
  .card-list {
    display: grid;
    gap: 2rem;
    margin-top: 2rem;
  }

  .music-card {
    padding: 1.5rem;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    background: var(--color-bg-secondary);
    transition: transform 0.2s ease;
  }

  .music-card:hover {
    transform: translateY(-4px);
  }

  .music-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 0.5rem;
  }

  .music-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0;
  }

  .music-year {
    color: var(--color-text-muted);
    font-size: 0.9rem;
  }

  .instruments {
    font-size: 1rem;
    color: var(--color-text-secondary);
    margin-bottom: 1.5rem;
  }

  .audio-player {
    margin-bottom: 1.5rem;
    border-radius: 4px;
    overflow: hidden;
  }

  .pdf-button {
    display: inline-block;
    padding: 0.5rem 1rem;
    background: var(--color-accent);
    color: white;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    font-size: 0.9rem;
  }

  .pdf-button:hover {
    filter: brightness(1.1);
  }
</style>
